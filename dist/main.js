(()=>{"use strict";const t=(t,e)=>e.getProjectTasks(t),e=class{constructor(){this.id=0,this.title="",this.description="",this.completed=!1,this.dueDate=null,this.priority="low"}setTaskId(t){this.id=t}setTaskTitle(t){this.title=t}setTaskDescription(t){this.description=t}setTaskCompleted(t){this.completed=t}setTaskDueDate(t){this.dueDate=t}setTaskPriority(t){this.priority=t}getTaskId(){return this.id}getTaskTitle(){return this.title}getTaskDescription(){return this.description}getTaskCompleted(){return this.completed}getTaskDueDate(){return this.dueDate}getTaskPriority(){return this.priority}},s=class{constructor(){this.name="Project",this.id=0,this.tasks=[]}setProjectName(t){this.name=t}setProjectId(t){this.id=t}appendTask(t){this.tasks[t.id]=t}getProjectName(){return this.name}getProjectId(){return this.id}getTasks(){return this.tasks}},o=new class{constructor(){this.storage={projects:[]}}deleteStorage(){localStorage.removeItem("todostorage")}getStorage(){return this.storage}setStorage(t){this.storage=t}saveStorage(){localStorage.setItem("todostorage",JSON.stringify(this.storage))}loadStorage(){null===localStorage.getItem("todostorage")&&this.saveStorage(),this.storage=JSON.parse(localStorage.getItem("todostorage"));for(let t=0;t<this.storage.projects.length;t++){this.storage.projects[t]=Object.assign(new s,this.storage.projects[t]);for(let s=0;s<this.storage.projects[t].tasks.length;s++)this.storage.projects[t].tasks[s]=Object.assign(new e,this.storage.projects[t].tasks[s])}}newProject(t,e){const o=new s;o.setProjectName(t),o.setProjectId(this.storage.projects.length),this.storage.projects.push(o),this.saveStorage()}newTask(t,s,o,n,a){const r=new e;r.setTaskId(this.storage.projects[t].tasks.length),r.setTaskTitle(s),r.setTaskDescription(o),r.setTaskDueDate(n),r.setTaskPriority(a),this.storage.projects[t].appendTask(r),this.saveStorage()}deleteProject(t){this.storage.projects.splice(t,1),this.saveStorage()}deleteTask(t,e){this.storage.projects[t].tasks.splice(e,1),this.saveStorage()}editProject(t,e){this.storage.projects[t].setProjectName(e),this.saveStorage()}editTask(t,e,s,o,n,a){this.storage.projects[t].tasks[e].setTaskTitle(s),this.storage.projects[t].tasks[e].setTaskDescription(o),this.storage.projects[t].tasks[e].setTaskDueDate(n),this.storage.projects[t].tasks[e].setTaskPriority(a),this.saveStorage()}getProject(t){return this.storage.projects.find((e=>e.getProjectId()===t))}getProjectTasks(t){return this.getProject(t).getTasks()}getProjects(){return void 0===this.storage.projects&&(this.storage.projects=[]),this.storage.projects}getStorage(){return this.storage}setStorage(t){this.storage=t}getTasks(){const t=[];return this.storage.projects.forEach((e=>{e.getTasks().forEach((e=>{t.push(e)}))})),t}getProjectTasks(t){return this.storage.projects[t].getTasks()}addTaskToProject(t,e){this.storage.projects[t].appendTask(e)}};o.loadStorage();const n=document.getElementById("container");var a=0;const r=()=>{const e=o.getProjects();console.log(1),console.log(e),console.log(3);const s=document.getElementById("projects-container"),n=document.getElementById("upper-modal-content");if(s.innerHTML="",l(n),0===e.length){console.log(1);const t=document.createElement("p");t.setAttribute("class","no-projects"),t.textContent="No Projects",s.appendChild(t)}else{e.forEach((t=>{const e=document.createElement("button");e.setAttribute("class","project-button"),e.setAttribute("id",t.getProjectId()),e.textContent=t.getProjectName(),s.appendChild(e)}));const n=document.querySelectorAll(".project-button");n.forEach((e=>{e.addEventListener("click",(()=>{const s=t(e.id,o);n.forEach((t=>t.classList.remove("project-button-selected"))),e.classList.add("project-button-selected"),a=e.id,i(s)}))}))}const r=document.createElement("button");r.setAttribute("class","new-project-button"),r.textContent="+ New Project",s.appendChild(r),r.addEventListener("click",(t=>{c()}))},i=t=>{const e=document.getElementById("task-container");if(e.innerHTML="",0===t.length){const t=document.createElement("p");t.setAttribute("class","no-tasks"),t.textContent="No Tasks",e.appendChild(t)}else console.log(t),t.forEach((t=>{const s=document.createElement("div");s.setAttribute("class","task-div"),s.setAttribute("id",t.getTaskId()),console.log(t.getTaskId());const o=document.createElement("h3");o.setAttribute("class","task-title"),o.textContent=t.getTaskTitle(),s.appendChild(o);const n=document.createElement("p");n.setAttribute("class","task-due-date"),n.textContent=t.getTaskDueDate(),s.appendChild(n);const a=document.createElement("button");a.setAttribute("class","task-delete"),a.textContent="Delete",s.appendChild(a),"High"===t.getTaskPriority()&&s.setAttribute("class","task-high"),"Medium"===t.getTaskPriority()&&s.setAttribute("class","task-medium"),"Low"===t.getTaskPriority()&&s.setAttribute("class","task-low"),e.appendChild(s)}));document.querySelectorAll(".task-div").forEach((t=>{t.addEventListener("click",(e=>{const s=o.tasks[t.id];d(s)}))})),document.querySelectorAll(".task-delete").forEach((e=>{e.addEventListener("click",(s=>{console.log(e.parentNode.id),o.deleteTask(a,e.parentNode.id),i(t)}))}));const s=document.createElement("div");s.setAttribute("class","new-task-div"),s.textContent="+ New Task",e.appendChild(s),s.addEventListener("click",(t=>{p()}))},c=()=>{const t=document.createElement("div");t.setAttribute("class","popup"),t.setAttribute("id","new-project-popup");const e=document.createElement("div");e.setAttribute("class","popup-content"),e.setAttribute("id","new-project-popup-content"),t.appendChild(e);const s=document.createElement("h2");s.setAttribute("class","popup-header"),s.textContent="New Project",e.appendChild(s);const a=document.createElement("form");a.setAttribute("class","popup-form"),a.setAttribute("id","new-project-popup-form"),e.appendChild(a);const i=document.createElement("label");i.setAttribute("class","popup-form-label"),i.setAttribute("for","new-project-popup-form-input"),i.textContent="Project Name",a.appendChild(i);const c=document.createElement("input");c.setAttribute("class","popup-form-input"),c.setAttribute("id","new-project-popup-form-input"),c.setAttribute("type","text"),c.setAttribute("placeholder","Project Name"),a.appendChild(c);const p=document.createElement("input");p.setAttribute("class","popup-form-submit"),p.setAttribute("id","new-project-popup-form-submit"),p.setAttribute("type","submit"),p.setAttribute("value","Create Project"),a.appendChild(p),n.appendChild(t),a.addEventListener("submit",(e=>{e.preventDefault();const s=document.getElementById("new-project-popup-form-input").value;o.newProject(s),r(),t.remove()}))},p=()=>{const e=document.createElement("div");e.setAttribute("class","popup"),e.setAttribute("id","new-task-popup");const s=document.createElement("div");s.setAttribute("class","popup-content"),s.setAttribute("id","new-task-popup-content"),e.appendChild(s);const r=document.createElement("h2");r.setAttribute("class","popup-header"),r.textContent="New Task",s.appendChild(r);const c=document.createElement("form");c.setAttribute("class","popup-form"),c.setAttribute("id","new-task-popup-form"),s.appendChild(c);const p=document.createElement("label");p.setAttribute("class","popup-form-label"),p.setAttribute("for","new-task-popup-form-input"),p.textContent="Task Name",c.appendChild(p);const d=document.createElement("input");d.setAttribute("class","popup-form-input"),d.setAttribute("id","new-task-popup-form-input"),d.setAttribute("type","text"),d.setAttribute("placeholder","Task Title"),c.appendChild(d);const u=document.createElement("input");u.setAttribute("class","popup-form-input"),u.setAttribute("id","new-task-popup-form-desc"),u.setAttribute("type","text"),u.setAttribute("placeholder","Task Description"),c.appendChild(u);const l=document.createElement("input");l.setAttribute("class","popup-form-input"),l.setAttribute("id","new-task-popup-form-due-date"),l.setAttribute("type","date"),l.setAttribute("placeholder","xx/xx/xxxx"),c.appendChild(l);const m=document.createElement("select");m.setAttribute("class","popup-form-input"),m.setAttribute("id","new-task-popup-form-priority"),c.appendChild(m);const h=document.createElement("option");h.setAttribute("value","High"),h.textContent="High",m.appendChild(h);const b=document.createElement("option");b.setAttribute("value","Medium"),b.textContent="Medium",m.appendChild(b);const k=document.createElement("option");k.setAttribute("value","Low"),k.textContent="Low",m.appendChild(k);const g=document.createElement("input");g.setAttribute("class","popup-form-submit"),g.setAttribute("id","new-task-popup-form-submit"),g.setAttribute("type","submit"),g.setAttribute("value","Create Task"),c.appendChild(g),n.appendChild(e),c.addEventListener("submit",(s=>{s.preventDefault();const n=document.getElementById("new-task-popup-form-input").value,r=document.getElementById("new-task-popup-form-desc").value,c=document.getElementById("new-task-popup-form-due-date").value,p=document.getElementById("new-task-popup-form-priority").value;o.newTask(a,n,r,c,p),i(t(0,o)),e.remove()}))},d=e=>{const s=document.createElement("div");s.setAttribute("class","popup"),s.setAttribute("id","task-popup");const r=document.createElement("div");r.setAttribute("class","popup-content"),r.setAttribute("id","task-popup-content"),s.appendChild(r);const c=document.createElement("h2");c.setAttribute("class","popup-header"),c.textContent="Task",r.appendChild(c);const p=document.createElement("h3");p.setAttribute("class","task-title"),p.textContent=e.getTaskTitle(),r.appendChild(p);const l=document.createElement("p");l.setAttribute("class","task-desc"),l.textContent=e.getTaskDescription(),r.appendChild(l);const m=document.createElement("p");m.setAttribute("class","task-due-date"),m.textContent=e.getTaskDueDate(),r.appendChild(m);const h=document.createElement("p");h.setAttribute("class","task-priority"),h.textContent=e.getTaskPriority(),r.appendChild(h);const b=document.createElement("button");b.setAttribute("class","task-completed"),b.setAttribute("id","task-completed"),!0===e.getTaskCompleted()?(b.setAttribute("class","completed-task"),b.textContent="Completed"):b.textContent="Mark as Completed",r.appendChild(b);const k=document.createElement("button");k.setAttribute("class","task-delete"),k.setAttribute("id","task-delete"),k.textContent="Delete",r.appendChild(k);const g=document.createElement("button");g.setAttribute("class","edit-task-button"),g.setAttribute("id","edit-task-button"),g.textContent="Edit",r.appendChild(g),n.appendChild(s),b.addEventListener("click",(t=>{e.setTaskCompleted(!e.getTaskCompleted()),d(e)})),k.addEventListener("click",(n=>{o.deleteTask(e.getTaskId()),i(t(a,o)),s.remove()})),g.addEventListener("click",(t=>{u(e)}))},u=t=>{const e=document.createElement("div");e.setAttribute("class","popup"),e.setAttribute("id","edit-task-popup");const s=document.createElement("div");s.setAttribute("class","popup-content"),s.setAttribute("id","edit-task-popup-content"),e.appendChild(s);const o=document.createElement("h2");o.setAttribute("class","popup-header"),o.textContent="Edit Task",s.appendChild(o);const a=document.createElement("form");a.setAttribute("class","popup-form"),a.setAttribute("id","edit-task-popup-form"),s.appendChild(a);const r=document.createElement("label");r.setAttribute("class","popup-form-label"),r.setAttribute("for","edit-task-popup-form-input"),r.textContent="Task Name",a.appendChild(r);const i=document.createElement("input");i.setAttribute("class","popup-form-input"),i.setAttribute("id","edit-task-popup-form-input"),i.setAttribute("type","text"),i.setAttribute("placeholder","Task Title"),i.setAttribute("value",t.getTaskTitle()),a.appendChild(i);const c=document.createElement("input");c.setAttribute("class","popup-form-input"),c.setAttribute("id","edit-task-popup-form-desc"),c.setAttribute("type","text"),c.setAttribute("placeholder","Task Description"),c.setAttribute("value",t.getTaskDescription()),a.appendChild(c);const p=document.createElement("input");p.setAttribute("class","popup-form-input"),p.setAttribute("id","edit-task-popup-form-due-date"),p.setAttribute("type","date"),p.setAttribute("placeholder","xx/xx/xxxx"),p.setAttribute("value",t.getTaskDueDate()),a.appendChild(p);const u=document.createElement("select");u.setAttribute("class","popup-form-input"),u.setAttribute("id","edit-task-popup-form-priority"),a.appendChild(u);const l=document.createElement("option");l.setAttribute("value","High"),l.textContent="High",u.appendChild(l);const m=document.createElement("option");m.setAttribute("value","Medium"),m.textContent="Medium",u.appendChild(m);const h=document.createElement("option");h.setAttribute("value","Low"),h.textContent="Low",u.appendChild(h);const b=document.createElement("input");b.setAttribute("class","popup-form-submit"),b.setAttribute("id","edit-task-popup-form-submit"),b.setAttribute("type","submit"),b.setAttribute("value","Edit Task"),a.appendChild(b),n.appendChild(e),a.addEventListener("submit",(s=>{s.preventDefault();const o=document.getElementById("edit-task-popup-form-input").value,n=document.getElementById("edit-task-popup-form-desc").value,a=document.getElementById("edit-task-popup-form-due-date").value,r=document.getElementById("edit-task-popup-form-priority").value;t.setTaskTitle(o),t.setTaskDescription(n),t.setTaskDueDate(a),t.setTaskPriority(r),d(t),e.remove()}))},l=t=>{const e=document.createElement("button");e.setAttribute("class","sproject-button"),e.setAttribute("id","today-button"),e.textContent="Today",t.appendChild(e);const s=document.createElement("button");s.setAttribute("class","sproject-button"),s.setAttribute("id","upcoming-week-button"),s.textContent="Upcoming Week",t.appendChild(s),e.addEventListener("click",(t=>{const e=(t=>{const e=t.getProjects(),s=new Date,o=[];return e.forEach((t=>{t.getTasks().forEach((t=>{t.getTaskDueDate()<=s&&o.push(t)}))})),o})(o);i(e)})),s.addEventListener("click",(t=>{const e=(t=>{const e=t.getProjects(),s=new Date,o=new Date(s.getFullYear(),s.getMonth(),s.getDate()+7),n=[];return e.forEach((t=>{t.getTasks().forEach((t=>{t.getTaskDueDate()>s&&t.getTaskDueDate()<=o&&n.push(t)}))})),n})(o);i(e)}))};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.getElementById("container");(()=>{const e=document.createElement("header");e.setAttribute("id","header");const s=document.createElement("nav");s.setAttribute("id","header-nav");const o=document.createElement("ul");o.setAttribute("id","header-nav-list"),["Home"].forEach((t=>{const e=document.createElement("li");e.setAttribute("class","header-nav-list-item"),e.textContent=t,o.appendChild(e)})),s.appendChild(o),e.appendChild(s);const n=document.createElement("h1");n.setAttribute("id","header-title"),n.textContent="Todo List",e.appendChild(n);const a=document.createElement("div");a.setAttribute("id","header-search");const r=document.createElement("input");r.setAttribute("id","header-search-input"),r.setAttribute("type","text"),r.setAttribute("placeholder","Search"),a.appendChild(r),e.appendChild(a),t.appendChild(e)})(),(()=>{const e=document.createElement("section");e.setAttribute("id","main-content"),(t=>{const e=document.createElement("aside");e.setAttribute("id","side-modal");const s=document.createElement("section");s.setAttribute("id","upper-modal-content"),e.appendChild(s);const o=document.createElement("hr");o.setAttribute("id","line-break"),e.appendChild(o);const n=document.createElement("section");n.setAttribute("id","projects-container"),e.appendChild(n),t.appendChild(e)})(e),(t=>{const e=document.createElement("section");e.setAttribute("id","task-container"),t.appendChild(e)})(e),t.appendChild(e)})(),r()})(),console.log("DOM Loaded")}))})();