(()=>{"use strict";const t=class{constructor(){this.id=0,this.title="",this.description="",this.completed=!1,this.dueDate=null,this.priority="low"}setTaskId(t){this.id=t}setTaskTitle(t){this.title=t}setTaskDescription(t){this.description=t}setTaskCompleted(t){this.completed=t}setTaskDueDate(t){this.dueDate=t}setTaskPriority(t){this.priority=t}getTaskId(){return this.id}getTaskTitle(){return this.title}getTaskDescription(){return this.description}getTaskCompleted(){return this.completed}getTaskDueDate(){return this.dueDate}getTaskPriority(){return this.priority}},e=class{constructor(){this.name="Project",this.id=0,this.tasks={},this.taskCount=0}setProjectName(t){this.name=t}setProjectId(t){this.id=t}appendTask(t){this.tasks[t.id]=t}getProjectName(){return this.name}getProjectId(){return this.id}getTasks(){return this.tasks}removeTask(t){delete this.tasks[t]}},s=new class{constructor(){this.storage={projects:{}}}deleteStorage(){localStorage.removeItem("todostorage")}getStorage(){return this.storage}setStorage(t){this.storage=t}saveStorage(){localStorage.setItem("todostorage",JSON.stringify(this.storage))}loadStorage(){null===localStorage.getItem("todostorage")&&this.saveStorage(),this.storage=JSON.parse(localStorage.getItem("todostorage"));for(let s in this.storage.projects){this.storage.projects[s]=Object.assign(new e,this.storage.projects[s]);for(let e in this.storage.projects[s].tasks)this.storage.projects[s].tasks[e]=Object.assign(new t,this.storage.projects[s].tasks[e])}}newProject(t,s){const o=new e;o.setProjectName(t),s=this.generateUniqueId(),o.setProjectId(s),this.storage.projects[s]=o,this.saveStorage()}newTask(e,s,o,n,a){const r=new t,i=this.generateUniqueId();r.setTaskId(i),r.setTaskTitle(s),r.setTaskDescription(o),r.setTaskDueDate(n),r.setTaskPriority(a),this.storage.projects[e].tasks[i]=r,this.saveStorage()}deleteProject(t){this.storage.projects[t]?(delete this.storage.projects[t],this.saveStorage()):console.log("Project not found")}deleteTask(t,e){this.storage.projects[t]&&this.storage.projects[t].tasks[e]?(delete this.storage.projects[t].tasks[e],this.saveStorage()):console.log("Project or task not found")}editProject(t,e){this.storage.projects[t].setProjectName(e),this.saveStorage()}editTask(t,e,s,o,n,a){this.storage.projects[t].tasks[e].setTaskTitle(s),this.storage.projects[t].tasks[e].setTaskDescription(o),this.storage.projects[t].tasks[e].setTaskDueDate(n),this.storage.projects[t].tasks[e].setTaskPriority(a),this.saveStorage()}getProject(t){return this.storage.projects[t]}getProjectTasks(t){return this.storage.projects[t].getTasks()}getProjects(){return void 0===this.storage.projects&&(this.storage.projects={}),this.storage.projects}getStorage(){return this.storage}setStorage(t){this.storage=t}getTasks(){const t={};for(let e in this.storage.projects)for(let s in this.storage.projects[e].tasks)t[s]=this.storage.projects[e].tasks[s];return t}addTaskToProject(t,e){this.storage.projects[t].appendTask(e)}setTaskCompleted(t,e,s){this.storage.projects[t].tasks[e].setTaskCompleted(s),this.saveStorage()}getTaskCompleted(t,e){return this.storage.projects[t].tasks[e].getTaskCompleted()}generateUniqueId(){return Date.now().toString()+Math.random().toString(36)}getTask(t,e){return this.storage.projects[t].tasks[e]}getTodayTasks(){const t={},e=this.getTasks(),s=new Date,o=s.getDay(),n=s.getMonth(),a=s.getFullYear();for(let s in e)e[s].getTaskDueDate()===new Date(a,n,o).toDateString()&&(t[s]=e[s]);return t}getThisWeekTasks(){const t={},e=this.getTasks(),s=new Date,o=s.getDay(),n=s.getDate(),a=s.getMonth(),r=s.getFullYear(),i=[];for(let t=0;t<7;t++)i.push(new Date(r,a,n-o+t).toDateString());for(let s in e)i.includes(e[s].getTaskDueDate())&&(t[s]=e[s]);return t}};s.loadStorage();const o=document.getElementById("container");var n=0;const a=()=>{const t=(t=>t.getProjects())(s),e=document.getElementById("projects-container"),o=document.getElementById("upper-modal-content");if(o.innerHTML="",e.innerHTML="",p(o),0===Object.keys(t).length){const t=document.createElement("p");t.setAttribute("class","no-projects"),t.textContent="No Projects",e.appendChild(t)}else{for(let s in t){const o=t[s],n=document.createElement("div"),a=document.createElement("img");a.setAttribute("src","./svg/lines.svg"),a.classList.add("svg-icon"),n.setAttribute("class","project-button"),n.setAttribute("id",s);const r=document.createElement("p");r.setAttribute("class","project-title"),r.textContent=o.getProjectName(),n.appendChild(a),n.appendChild(r),e.appendChild(n)}const o=document.querySelectorAll(".project-button");o.forEach((t=>{t.addEventListener("click",(()=>{const e=((t,e)=>e.getProjectTasks(t))(t.id,s);o.forEach((t=>t.classList.remove("project-button-selected"))),t.classList.add("project-button-selected"),n=t.id,r(e)}))}))}const a=document.createElement("div"),c=document.createElement("img"),d=document.createElement("p");c.setAttribute("src","./svg/plus-clock.svg"),c.classList.add("svg-icon"),a.appendChild(c),d.textContent="New Project",a.appendChild(d),a.setAttribute("class","new-project-button"),e.appendChild(a),a.addEventListener("click",(t=>{i()}))},r=t=>{const e=document.getElementById("task-container");if(e.innerHTML="",0===Object.keys(t).length){const t=document.createElement("p");t.setAttribute("class","no-tasks"),t.textContent="No Tasks",e.appendChild(t)}else for(let s in t){const o=t[s],n=document.createElement("div");n.setAttribute("class","task-div"),n.setAttribute("id",o.getTaskId());const a=document.createElement("h3");a.setAttribute("class","task-title"),a.textContent=o.getTaskTitle(),n.appendChild(a);const r=document.createElement("p");r.setAttribute("class","task-due-date"),r.textContent=o.getTaskDueDate(),n.appendChild(r),"High"===o.getTaskPriority()&&n.classList.add("task-high"),"Medium"===o.getTaskPriority()&&n.classList.add("task-medium"),"Low"===o.getTaskPriority()&&n.classList.add("task-low");const i=document.createElement("div");i.setAttribute("class","task-actions"),n.appendChild(i);const c=document.createElement("button");c.setAttribute("class","task-delete"),c.classList.add("exclude-from-div-click"),c.textContent="Delete",i.appendChild(c);const d=document.createElement("input");d.setAttribute("class","task-completed"),d.setAttribute("id","task-completed"),d.classList.add("exclude-from-div-click"),d.setAttribute("type","checkbox"),!0===o.getTaskCompleted()&&(d.checked=!0),i.appendChild(d),e.appendChild(n)}const o=document.querySelectorAll(".task-div");0!==o.length&&o.forEach((t=>{t.addEventListener("click",(e=>{if(!e.target.classList.contains("exclude-from-div-click")&&!e.target.closest(".exclude-from-click")){const e=s.getTask(n,t.id);d(e)}}))}));const a=document.querySelectorAll(".task-delete");0!==a.length&&a.forEach((e=>{e.addEventListener("click",(o=>{s.deleteTask(n,e.parentNode.parentNode.id),r(t)}))}));const i=document.querySelectorAll(".task-completed");0!==i.length&&i.forEach((e=>{e.addEventListener("click",(o=>{s.setTaskCompleted(n,e.parentNode.parentNode.id,e.checked),r(t)}))}));const p=document.createElement("div");p.setAttribute("class","new-task-div"),p.textContent="+ New Task",e.appendChild(p),p.addEventListener("click",(t=>{c()}))},i=()=>{const t=document.createElement("div");t.setAttribute("class","popup"),t.setAttribute("id","new-project-popup");const e=document.createElement("div");e.setAttribute("class","popup-content"),e.setAttribute("id","new-project-popup-content"),t.appendChild(e);const n=document.createElement("h2");n.setAttribute("class","popup-header"),n.textContent="New Project",e.appendChild(n);const r=document.createElement("form");r.setAttribute("class","popup-form"),r.setAttribute("id","new-project-popup-form"),e.appendChild(r);const i=document.createElement("label");i.setAttribute("class","popup-form-label"),i.setAttribute("for","new-project-popup-form-input"),i.textContent="Project Name",r.appendChild(i);const c=document.createElement("input");c.setAttribute("class","popup-form-input"),c.setAttribute("id","new-project-popup-form-input"),c.setAttribute("type","text"),c.setAttribute("placeholder","Project Name"),r.appendChild(c);const d=document.createElement("input");d.setAttribute("class","popup-form-submit"),d.setAttribute("id","new-project-popup-form-submit"),d.setAttribute("type","submit"),d.setAttribute("value","Create Project"),r.appendChild(d),o.appendChild(t),r.addEventListener("submit",(e=>{e.preventDefault();const o=document.getElementById("new-project-popup-form-input").value;s.newProject(o),a(),t.remove(),a()}))},c=()=>{const t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),a=document.createElement("div");a.setAttribute("class","popup-container");const i=document.createElement("div");i.setAttribute("class","popup"),i.setAttribute("id","new-task-popup");const c=document.createElement("div");c.setAttribute("class","popup-content"),c.setAttribute("id","new-task-popup-content"),i.appendChild(c);const d=document.createElement("h2");d.setAttribute("class","popup-header"),d.textContent="New Task",c.appendChild(d);const p=document.createElement("form");p.setAttribute("class","popup-form"),p.setAttribute("id","new-task-popup-form"),c.appendChild(p);const l=document.createElement("input");l.setAttribute("class","popup-form-input"),l.setAttribute("id","new-task-popup-form-input"),l.setAttribute("type","text"),l.setAttribute("placeholder","Task Title"),p.appendChild(l);const u=document.createElement("input");u.setAttribute("class","popup-form-input"),u.setAttribute("id","new-task-popup-form-desc"),u.setAttribute("type","text"),u.setAttribute("placeholder","Task Description"),p.appendChild(u);const m=document.createElement("input");m.setAttribute("class","popup-form-input"),m.setAttribute("id","new-task-popup-form-due-date"),m.setAttribute("type","date"),m.setAttribute("value",e),p.appendChild(m);const h=document.createElement("select");h.setAttribute("class","popup-form-input"),h.setAttribute("id","new-task-popup-form-priority"),p.appendChild(h);const g=document.createElement("option");g.setAttribute("value","High"),g.textContent="High",h.appendChild(g);const k=document.createElement("option");k.setAttribute("value","Medium"),k.textContent="Medium",h.appendChild(k);const b=document.createElement("option");b.setAttribute("value","Low"),b.textContent="Low",h.appendChild(b);const A=document.createElement("input");A.setAttribute("class","popup-form-submit"),A.setAttribute("id","new-task-popup-form-submit"),A.setAttribute("type","submit"),A.setAttribute("value","Create Task"),p.appendChild(A),a.appendChild(i),o.appendChild(a),p.addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("new-task-popup-form-input").value,o=document.getElementById("new-task-popup-form-desc").value,a=document.getElementById("new-task-popup-form-due-date").value,c=document.getElementById("new-task-popup-form-priority").value;s.newTask(n,e,o,a,c);const d=s.getProjectTasks(n);r(d),i.remove()})),a.addEventListener("click",(t=>{t.target.classList.contains("popup-container")&&a.remove()}))},d=t=>{},p=t=>{const e=document.createElement("div"),o=document.createElement("img"),n=document.createElement("p");n.textContent="Today",o.setAttribute("src","./svg/fastclock.svg"),o.classList.add("svg-icon"),e.appendChild(o),e.setAttribute("class","sproject-button"),e.setAttribute("id","today-button"),e.appendChild(o),e.appendChild(n),t.appendChild(e);const a=document.createElement("button"),i=document.createElement("img"),c=document.createElement("p");c.textContent="This Week",i.setAttribute("src","./svg/table.svg"),i.classList.add("svg-icon"),a.appendChild(i),a.appendChild(c),a.setAttribute("class","sproject-button"),a.setAttribute("id","upcoming-week-button"),t.appendChild(a),e.addEventListener("click",(t=>{const e=s.getTodayTasks();r(e)})),a.addEventListener("click",(t=>{const e=s.getThisWeekTasks();r(e)}))};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.getElementById("container");(()=>{const e=document.createElement("header");e.setAttribute("id","header");const s=document.createElement("nav");s.setAttribute("id","header-nav");const o=document.createElement("ul");o.setAttribute("id","header-nav-list"),["Home"].forEach((t=>{const e=document.createElement("li");e.setAttribute("class","header-nav-list-item"),e.textContent=t,o.appendChild(e)})),s.appendChild(o),e.appendChild(s);const n=document.createElement("h1");n.setAttribute("id","header-title"),n.textContent="Todo List",e.appendChild(n);const a=document.createElement("div");a.setAttribute("id","header-search");const r=document.createElement("input");r.setAttribute("id","header-search-input"),r.setAttribute("type","text"),r.setAttribute("placeholder","Search"),a.appendChild(r),e.appendChild(a),t.appendChild(e)})(),(()=>{const e=document.createElement("section");e.setAttribute("id","main-content"),(t=>{const e=document.createElement("aside");e.setAttribute("id","side-modal");const s=document.createElement("section");s.setAttribute("id","upper-modal-content"),e.appendChild(s);const o=document.createElement("hr");o.setAttribute("id","line-break"),e.appendChild(o);const n=document.createElement("section");n.setAttribute("id","projects-container"),e.appendChild(n),t.appendChild(e)})(e),(t=>{const e=document.createElement("section");e.setAttribute("id","task-container"),t.appendChild(e)})(e),t.appendChild(e)})(),a()})(),console.log("DOM Loaded")}))})();