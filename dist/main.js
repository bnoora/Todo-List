(()=>{"use strict";const t=(t,e)=>e.getProjectTasks(t),e=class{constructor(){this.id=0,this.title="",this.description="",this.completed=!1,this.dueDate=null,this.priority="low"}setTaskId(t){this.id=t}setTaskTitle(t){this.title=t}setTaskDescription(t){this.description=t}setTaskCompleted(t){this.completed=t}setTaskDueDate(t){this.dueDate=t}setTaskPriority(t){this.priority=t}getTaskId(){return this.id}getTaskTitle(){return this.title}getTaskDescription(){return this.description}getTaskCompleted(){return this.completed}getTaskDueDate(){return this.dueDate}getTaskPriority(){return this.priority}},s=class{constructor(){this.name="Project",this.id=0,this.tasks={},this.taskCount=0}setProjectName(t){this.name=t}setProjectId(t){this.id=t}appendTask(t){this.tasks[t.id]=t}getProjectName(){return this.name}getProjectId(){return this.id}getTasks(){return this.tasks}removeTask(t){delete this.tasks[t]}},n=new class{constructor(){this.storage={projects:{}}}deleteStorage(){localStorage.removeItem("todostorage")}getStorage(){return this.storage}setStorage(t){this.storage=t}saveStorage(){localStorage.setItem("todostorage",JSON.stringify(this.storage))}loadStorage(){null===localStorage.getItem("todostorage")&&this.saveStorage(),this.storage=JSON.parse(localStorage.getItem("todostorage"));for(let t in this.storage.projects){this.storage.projects[t]=Object.assign(new s,this.storage.projects[t]);for(let s in this.storage.projects[t].tasks)this.storage.projects[t].tasks[s]=Object.assign(new e,this.storage.projects[t].tasks[s])}}newProject(t,e){const n=new s;n.setProjectName(t),e=this.generateUniqueId(),n.setProjectId(e),this.storage.projects[e]=n,this.saveStorage()}newTask(t,s,n,o,a){const i=new e,r=this.generateUniqueId();i.setTaskId(r),i.setTaskTitle(s),i.setTaskDescription(n),i.setTaskDueDate(o),i.setTaskPriority(a),this.storage.projects[t].tasks[r]=i,this.saveStorage()}editTask(t,e,s,n,o,a){this.storage.projects[t].tasks[e].setTaskTitle(s),this.storage.projects[t].tasks[e].setTaskDescription(n),this.storage.projects[t].tasks[e].setTaskDueDate(o),this.storage.projects[t].tasks[e].setTaskPriority(a),this.saveStorage()}deleteProject(t){this.storage.projects[t]?(delete this.storage.projects[t],this.saveStorage()):console.log("Project not found")}deleteTask(t,e){this.storage.projects[t]&&this.storage.projects[t].tasks[e]?(delete this.storage.projects[t].tasks[e],this.saveStorage()):console.log("Project or task not found")}editProject(t,e){this.storage.projects[t].setProjectName(e),this.saveStorage()}editTask(t,e,s,n,o,a){this.storage.projects[t].tasks[e].setTaskTitle(s),this.storage.projects[t].tasks[e].setTaskDescription(n),this.storage.projects[t].tasks[e].setTaskDueDate(o),this.storage.projects[t].tasks[e].setTaskPriority(a),this.saveStorage()}getProject(t){return this.storage.projects[t]}getProjectTasks(t){return this.storage.projects[t].getTasks()}getProjects(){return void 0===this.storage.projects&&(this.storage.projects={}),this.storage.projects}getStorage(){return this.storage}setStorage(t){this.storage=t}getTasks(){const t={};for(let e in this.storage.projects)for(let s in this.storage.projects[e].tasks)t[s]=this.storage.projects[e].tasks[s];return t}addTaskToProject(t,e){this.storage.projects[t].appendTask(e)}setTaskCompleted(t,e,s){this.storage.projects[t].tasks[e].setTaskCompleted(s),this.saveStorage()}getTaskCompleted(t,e){return this.storage.projects[t].tasks[e].getTaskCompleted()}generateUniqueId(){return Date.now().toString()+Math.random().toString(36)}getTask(t,e){return this.storage.projects[t].tasks[e]}getTodayTasks(){const t={},e=this.getTasks(),s=new Date,n=`${s.getFullYear()}-${(s.getMonth()+1).toString().padStart(2,"0")}-${s.getDate().toString().padStart(2,"0")}`;for(let s in e)e[s].getTaskDueDate()===n&&(t[s]=e[s]);return t}getThisWeekTasks(){const t={},e=this.getTasks(),s=new Date,n=s.getFullYear(),o=s.getMonth(),a=s.getDate(),i=s.getDay(),r=[],c=new Date(n,o,a-i);for(let t=0;t<7;t++){const e=new Date(c.getFullYear(),c.getMonth(),c.getDate()+t),s=`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`;r.push(s)}for(let s in e){let n=e[s].getTaskDueDate();r.includes(n)&&(t[s]=e[s])}return t}};n.loadStorage();const o=document.getElementById("container");var a=0;const i=()=>{const e=(t=>t.getProjects())(n),s=document.getElementById("projects-container"),o=document.getElementById("upper-modal-content");if(o.innerHTML="",s.innerHTML="",l(o),0===Object.keys(e).length){const t=document.createElement("p");t.setAttribute("class","no-projects"),t.textContent="No Projects",s.appendChild(t)}else{for(let t in e){const n=e[t],o=document.createElement("div"),a=document.createElement("img");a.setAttribute("src","./svg/lines.svg"),a.classList.add("svg-icon"),o.setAttribute("class","project-button"),o.setAttribute("id",t);const i=document.createElement("p");i.setAttribute("class","project-title"),i.textContent=n.getProjectName(),o.appendChild(a),o.appendChild(i),s.appendChild(o)}const o=document.querySelectorAll(".project-button");o.forEach((e=>{e.addEventListener("click",(()=>{const s=t(e.id,n);o.forEach((t=>t.classList.remove("project-button-selected"))),e.classList.add("project-button-selected"),a=e.id,r(s)}))}))}const i=document.createElement("div"),d=document.createElement("img"),p=document.createElement("p");d.setAttribute("src","./svg/plus-clock.svg"),d.classList.add("svg-icon"),i.appendChild(d),p.textContent="New Project",i.appendChild(p),i.setAttribute("class","new-project-button"),s.appendChild(i),i.addEventListener("click",(t=>{c()}))},r=(t,e=!1)=>{const s=document.getElementById("task-container");if(s.innerHTML="",0===Object.keys(t).length){const t=document.createElement("p");t.setAttribute("class","no-tasks"),t.textContent="No Tasks",s.appendChild(t)}else for(let e in t){const n=t[e],o=document.createElement("div");o.setAttribute("class","task-div"),o.setAttribute("id",n.getTaskId());const a=document.createElement("div");a.setAttribute("class","task-title"),a.textContent=n.getTaskTitle(),o.appendChild(a);const i=document.createElement("div");i.setAttribute("class","task-due-date"),i.textContent=n.getTaskDueDate(),o.appendChild(i),"High"===n.getTaskPriority()&&o.classList.add("task-high"),"Medium"===n.getTaskPriority()&&o.classList.add("task-medium"),"Low"===n.getTaskPriority()&&o.classList.add("task-low");const r=document.createElement("div");r.setAttribute("class","task-actions"),o.appendChild(r);const c=document.createElement("img");c.setAttribute("class","task-edit"),c.classList.add("exclude-from-div-click"),c.setAttribute("id","task-edit"),c.setAttribute("src","./svg/pencil.svg"),r.appendChild(c);const d=document.createElement("img");d.setAttribute("class","task-delete-svg"),d.classList.add("exclude-from-div-click"),d.setAttribute("id","task-delete"),d.setAttribute("src","./svg/trash.svg"),r.appendChild(d);const p=document.createElement("input");p.setAttribute("class","task-completed"),p.setAttribute("id","task-completed"),p.classList.add("exclude-from-div-click"),p.setAttribute("type","checkbox"),!0===n.getTaskCompleted()&&(p.checked=!0,o.classList.add("completed-task")),r.appendChild(p),s.appendChild(o)}const o=document.querySelectorAll(".task-div");0!==o.length&&o.forEach((t=>{t.addEventListener("click",(e=>{if(!e.target.classList.contains("exclude-from-div-click")&&!e.target.closest(".exclude-from-click")){const e=n.getTask(a,t.id);p(e)}}))}));const i=document.querySelectorAll(".task-delete");0!==i.length&&i.forEach((e=>{e.addEventListener("click",(s=>{n.deleteTask(a,e.parentNode.parentNode.id),r(t)}))}));const c=document.querySelectorAll(".task-completed");0!==c.length&&c.forEach((e=>{e.addEventListener("click",(s=>{n.setTaskCompleted(a,e.parentNode.parentNode.id,e.checked),r(t)}))}));const l=document.querySelectorAll(".task-edit");if(0!==l.length&&l.forEach((t=>{t.addEventListener("click",(e=>{const s=n.getTask(a,t.parentNode.parentNode.id);u(s)}))})),!1===e){const t=document.createElement("div");t.setAttribute("class","new-task-div"),t.textContent="+ New Task",s.appendChild(t),t.addEventListener("click",(t=>{d()}))}},c=()=>{const t=document.createElement("div");t.setAttribute("class","popup-container");const e=document.createElement("div");e.setAttribute("class","popup"),e.setAttribute("id","new-project-popup");const s=document.createElement("div");s.setAttribute("class","popup-content"),s.setAttribute("id","new-project-popup-content"),e.appendChild(s);const a=document.createElement("h2");a.setAttribute("class","popup-header"),a.textContent="New Project",s.appendChild(a);const r=document.createElement("form");r.setAttribute("class","popup-form"),r.setAttribute("id","new-project-popup-form"),s.appendChild(r);const c=document.createElement("label");c.setAttribute("class","popup-form-label"),c.setAttribute("for","new-project-popup-form-input"),c.textContent="Project Name",r.appendChild(c);const d=document.createElement("input");d.setAttribute("class","popup-form-input"),d.setAttribute("id","new-project-popup-form-input"),d.setAttribute("type","text"),d.setAttribute("placeholder","Project Name"),r.appendChild(d);const p=document.createElement("input");p.setAttribute("class","popup-form-submit"),p.setAttribute("id","new-project-popup-form-submit"),p.setAttribute("type","submit"),p.setAttribute("value","Create Project"),r.appendChild(p),o.appendChild(t),t.appendChild(e),r.addEventListener("submit",(t=>{t.preventDefault();const s=document.getElementById("new-project-popup-form-input").value;n.newProject(s),i(),e.remove(),i()})),t.addEventListener("click",(e=>{e.target.classList.contains("popup-container")&&t.remove()}))},d=()=>{const t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),s=document.createElement("div");s.setAttribute("class","popup-container");const i=document.createElement("div");i.setAttribute("class","popup"),i.setAttribute("id","new-task-popup");const c=document.createElement("div");c.setAttribute("class","popup-content"),c.setAttribute("id","new-task-popup-content"),i.appendChild(c);const d=document.createElement("h2");d.setAttribute("class","popup-header"),d.textContent="New Task",c.appendChild(d);const p=document.createElement("form");p.setAttribute("class","popup-form"),p.setAttribute("id","new-task-popup-form"),c.appendChild(p);const u=document.createElement("input");u.setAttribute("class","popup-form-input"),u.setAttribute("id","new-task-popup-form-input"),u.setAttribute("type","text"),u.setAttribute("placeholder","Task Title"),p.appendChild(u);const l=document.createElement("input");l.setAttribute("class","popup-form-input"),l.setAttribute("id","new-task-popup-form-desc"),l.setAttribute("type","text"),l.setAttribute("placeholder","Task Description"),p.appendChild(l);const m=document.createElement("input");m.setAttribute("class","popup-form-input"),m.setAttribute("id","new-task-popup-form-due-date"),m.setAttribute("type","date"),m.setAttribute("value",e),p.appendChild(m);const h=document.createElement("select");h.setAttribute("class","popup-form-input"),h.setAttribute("id","new-task-popup-form-priority"),p.appendChild(h);const k=document.createElement("option");k.setAttribute("value","High"),k.textContent="High",h.appendChild(k);const g=document.createElement("option");g.setAttribute("value","Medium"),g.textContent="Medium",h.appendChild(g);const b=document.createElement("option");b.setAttribute("value","Low"),b.textContent="Low",h.appendChild(b);const A=document.createElement("input");A.setAttribute("class","popup-form-submit"),A.setAttribute("id","new-task-popup-form-submit"),A.setAttribute("type","submit"),A.setAttribute("value","Create Task"),p.appendChild(A),s.appendChild(i),o.appendChild(s),p.addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("new-task-popup-form-input").value,s=document.getElementById("new-task-popup-form-desc").value,o=document.getElementById("new-task-popup-form-due-date").value,c=document.getElementById("new-task-popup-form-priority").value;n.newTask(a,e,s,o,c);const d=n.getProjectTasks(a);r(d),i.remove()})),s.addEventListener("click",(t=>{t.target.classList.contains("popup-container")&&s.remove()}))},p=e=>{const s=e.getTaskId(),i=document.createElement("div");i.setAttribute("class","popup-container");const c=document.createElement("div");c.setAttribute("class","popup"),c.setAttribute("id","task-popup");const d=document.createElement("div");d.setAttribute("class","popup-content"),d.setAttribute("id","task-popup-content"),c.appendChild(d);const l=document.createElement("h2");l.setAttribute("class","task-title"),l.textContent=e.getTaskTitle(),d.appendChild(l);const m=document.createElement("p");m.setAttribute("class","task-desc"),m.textContent=e.getTaskDescription(),d.appendChild(m);const h=document.createElement("p");h.setAttribute("class","task-due-date"),h.textContent=e.getTaskDueDate(),d.appendChild(h);const k=document.createElement("p");k.setAttribute("class","task-priority"),k.textContent=e.getTaskPriority(),d.appendChild(k);const g=document.createElement("button");g.setAttribute("class","task-completed"),g.setAttribute("id","task-completed"),!0===e.getTaskCompleted()?(g.setAttribute("class","completed-task"),g.textContent="Completed"):g.textContent="Mark as Completed",d.appendChild(g);const b=document.createElement("button");b.setAttribute("class","task-delete"),b.setAttribute("id","task-delete"),b.textContent="Delete",d.appendChild(b);const A=document.createElement("button");A.setAttribute("class","edit-task-button"),A.setAttribute("id","edit-task-button"),A.textContent="Edit",d.appendChild(A),o.appendChild(i),i.appendChild(c),g.addEventListener("click",(o=>{e.setTaskCompleted(!e.getTaskCompleted()),n.setTaskCompleted(a,s,e.getTaskCompleted()),i.remove(),r(t(a,n)),p(e)})),b.addEventListener("click",(e=>{n.deleteTask(a,s),r(t(a,n)),i.remove()})),A.addEventListener("click",(t=>{u(e)})),i.addEventListener("click",(t=>{t.target.classList.contains("popup-container")&&i.remove()}))},u=e=>{const s=document.createElement("div");s.setAttribute("class","popup-container");const i=document.createElement("div");i.setAttribute("class","popup"),i.setAttribute("id","edit-task-popup");const c=document.createElement("div");c.setAttribute("class","popup-content"),c.setAttribute("id","edit-task-popup-content"),i.appendChild(c);const d=document.createElement("h2");d.setAttribute("class","popup-header"),d.textContent="Edit Task",c.appendChild(d);const p=document.createElement("form");p.setAttribute("class","popup-form"),p.setAttribute("id","edit-task-popup-form"),c.appendChild(p);const u=document.createElement("input");u.setAttribute("class","popup-form-input"),u.setAttribute("id","edit-task-popup-form-input"),u.setAttribute("type","text"),u.setAttribute("placeholder","Task Title"),u.setAttribute("value",e.getTaskTitle()),p.appendChild(u);const l=document.createElement("input");l.setAttribute("class","popup-form-input"),l.setAttribute("id","edit-task-popup-form-desc"),l.setAttribute("type","text"),l.setAttribute("placeholder","Task Description"),l.setAttribute("value",e.getTaskDescription()),p.appendChild(l);const m=document.createElement("input");m.setAttribute("class","popup-form-input"),m.setAttribute("id","edit-task-popup-form-due-date"),m.setAttribute("type","date"),m.setAttribute("placeholder","xx/xx/xxxx"),m.setAttribute("value",e.getTaskDueDate()),p.appendChild(m);const h=document.createElement("select");h.setAttribute("class","popup-form-input"),h.setAttribute("id","edit-task-popup-form-priority"),p.appendChild(h);const k=document.createElement("option");k.setAttribute("value","High"),k.textContent="High",h.appendChild(k);const g=document.createElement("option");g.setAttribute("value","Medium"),g.textContent="Medium",h.appendChild(g);const b=document.createElement("option");b.setAttribute("value","Low"),b.textContent="Low",h.appendChild(b);const A=document.createElement("input");A.setAttribute("class","popup-form-submit"),A.setAttribute("id","edit-task-popup-form-submit"),A.setAttribute("type","submit"),A.setAttribute("value","Edit Task"),p.appendChild(A),o.appendChild(s),s.appendChild(i),p.addEventListener("submit",(o=>{o.preventDefault();const i=document.getElementById("edit-task-popup-form-input").value,c=document.getElementById("edit-task-popup-form-desc").value,d=document.getElementById("edit-task-popup-form-due-date").value,p=document.getElementById("edit-task-popup-form-priority").value;n.editTask(a,e.getTaskId(),i,c,d,p),r(t(a,n)),s.remove()})),s.addEventListener("click",(t=>{t.target.classList.contains("popup-container")&&s.remove()}))},l=t=>{const e=document.createElement("div"),s=document.createElement("img"),o=document.createElement("p");o.textContent="Today",s.setAttribute("src","./svg/fastclock.svg"),s.classList.add("svg-icon"),e.appendChild(s),e.setAttribute("class","sproject-button"),e.setAttribute("id","today-button"),e.appendChild(s),e.appendChild(o),t.appendChild(e);const a=document.createElement("button"),i=document.createElement("img"),c=document.createElement("p");c.textContent="This Week",i.setAttribute("src","./svg/table.svg"),i.classList.add("svg-icon"),a.appendChild(i),a.appendChild(c),a.setAttribute("class","sproject-button"),a.setAttribute("id","upcoming-week-button"),t.appendChild(a),e.addEventListener("click",(t=>{const e=n.getTodayTasks();r(e,!0)})),a.addEventListener("click",(t=>{const e=n.getThisWeekTasks();r(e,!0)}))};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.getElementById("container");(()=>{const e=document.createElement("header");e.setAttribute("id","header");const s=document.createElement("nav");s.setAttribute("id","header-nav");const n=document.createElement("ul");n.setAttribute("id","header-nav-list"),["Home"].forEach((t=>{const e=document.createElement("li");e.setAttribute("class","header-nav-list-item"),e.textContent=t,n.appendChild(e)})),s.appendChild(n),e.appendChild(s);const o=document.createElement("h1");o.setAttribute("id","header-title"),o.textContent="Todo List",e.appendChild(o);const a=document.createElement("div");a.setAttribute("id","header-search");const i=document.createElement("input");i.setAttribute("id","header-search-input"),i.setAttribute("type","text"),i.setAttribute("placeholder","Search"),a.appendChild(i),e.appendChild(a),t.appendChild(e)})(),(()=>{const e=document.createElement("section");e.setAttribute("id","main-content"),(t=>{const e=document.createElement("aside");e.setAttribute("id","side-modal");const s=document.createElement("section");s.setAttribute("id","upper-modal-content"),e.appendChild(s);const n=document.createElement("hr");n.setAttribute("id","line-break"),e.appendChild(n);const o=document.createElement("section");o.setAttribute("id","projects-container"),e.appendChild(o),t.appendChild(e)})(e),(t=>{const e=document.createElement("section");e.setAttribute("id","task-container"),t.appendChild(e)})(e),t.appendChild(e)})(),i()})(),console.log("DOM Loaded")}))})();