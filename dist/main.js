(()=>{"use strict";const t=(t,e)=>e.getProjectTasks(t),e=class{constructor(){this.id=0,this.title="",this.description="",this.completed=!1,this.dueDate=null,this.priority="low"}setTaskId(t){this.id=t}setTaskTitle(t){this.title=t}setTaskDescription(t){this.description=t}setTaskCompleted(t){this.completed=t}setTaskDueDate(t){this.dueDate=t}setTaskPriority(t){this.priority=t}getTaskId(){return this.id}getTaskTitle(){return this.title}getTaskDescription(){return this.description}getTaskCompleted(){return this.completed}getTaskDueDate(){return this.dueDate}getTaskPriority(){return this.priority}},s=class{constructor(){this.name="Project",this.id=0,this.tasks={},this.taskCount=0}setProjectName(t){this.name=t}setProjectId(t){this.id=t}appendTask(t){this.tasks[t.id]=t}getProjectName(){return this.name}getProjectId(){return this.id}getTasks(){return this.tasks}removeTask(t){delete this.tasks[t]}},o=new class{constructor(){this.storage={projects:{}}}deleteStorage(){localStorage.removeItem("todostorage")}getStorage(){return this.storage}setStorage(t){this.storage=t}saveStorage(){localStorage.setItem("todostorage",JSON.stringify(this.storage))}loadStorage(){null===localStorage.getItem("todostorage")&&this.saveStorage(),this.storage=JSON.parse(localStorage.getItem("todostorage"));for(let t in this.storage.projects){this.storage.projects[t]=Object.assign(new s,this.storage.projects[t]);for(let s in this.storage.projects[t].tasks)this.storage.projects[t].tasks[s]=Object.assign(new e,this.storage.projects[t].tasks[s])}}newProject(t,e){const o=new s;o.setProjectName(t),e=this.generateUniqueId(),o.setProjectId(e),this.storage.projects[e]=o,this.saveStorage()}newTask(t,s,o,n,r){const a=new e,i=this.generateUniqueId();a.setTaskId(i),a.setTaskTitle(s),a.setTaskDescription(o),a.setTaskDueDate(n),a.setTaskPriority(r),this.storage.projects[t].tasks[i]=a,this.saveStorage()}deleteProject(t){this.storage.projects.splice(t,1),this.saveStorage()}deleteTask(t,e){this.storage.projects[t].tasks.splice(e,1),this.saveStorage()}editProject(t,e){this.storage.projects[t].setProjectName(e),this.saveStorage()}editTask(t,e,s,o,n,r){this.storage.projects[t].tasks[e].setTaskTitle(s),this.storage.projects[t].tasks[e].setTaskDescription(o),this.storage.projects[t].tasks[e].setTaskDueDate(n),this.storage.projects[t].tasks[e].setTaskPriority(r),this.saveStorage()}getProject(t){return this.storage.projects[t]}getProjectTasks(t){return this.storage.projects[t].getTasks()}getProjects(){return void 0===this.storage.projects&&(this.storage.projects={}),this.storage.projects}getStorage(){return this.storage}setStorage(t){this.storage=t}getTasks(){const t={};for(let e in this.storage.projects)for(let s in this.storage.projects[e].tasks)t[s]=this.storage.projects[e].tasks[s];return t}addTaskToProject(t,e){this.storage.projects[t].appendTask(e)}setTaskCompleted(t,e,s){this.storage.projects[t].tasks[e].setTaskCompleted(s),this.saveStorage()}getTaskCompleted(t,e){return this.storage.projects[t].tasks[e].getTaskCompleted()}generateUniqueId(){return Date.now().toString()+Math.random().toString(36)}};o.loadStorage();const n=document.getElementById("container");var r=0;const a=()=>{const e=o.getProjects(),s=document.getElementById("projects-container"),n=document.getElementById("upper-modal-content");if(s.innerHTML="",p(n),0===e.length){const t=document.createElement("p");t.setAttribute("class","no-projects"),t.textContent="No Projects",s.appendChild(t)}else{e.forEach((t=>{const e=document.createElement("button");e.setAttribute("class","project-button"),e.setAttribute("id",t.getProjectId()),e.textContent=t.getProjectName(),s.appendChild(e)}));const n=document.querySelectorAll(".project-button");n.forEach((e=>{e.addEventListener("click",(()=>{const s=t(e.id,o);n.forEach((t=>t.classList.remove("project-button-selected"))),e.classList.add("project-button-selected"),r=e.id,i(s)}))}))}const a=document.createElement("button");a.setAttribute("class","new-project-button"),a.textContent="+ New Project",s.appendChild(a),a.addEventListener("click",(t=>{c()}))},i=t=>{const e=document.getElementById("task-container");if(e.innerHTML="",console.log(t),0===Object.keys(t).length){const t=document.createElement("p");t.setAttribute("class","no-tasks"),t.textContent="No Tasks",e.appendChild(t)}else for(let s in t){const o=t[s],n=document.createElement("div");n.setAttribute("class","task-div"),n.setAttribute("id",o.getTaskId());const r=document.createElement("h3");r.setAttribute("class","task-title"),r.textContent=o.getTaskTitle(),n.appendChild(r);const a=document.createElement("p");a.setAttribute("class","task-due-date"),a.textContent=o.getTaskDueDate(),n.appendChild(a),"High"===o.getTaskPriority()&&n.classList.add("task-high"),"Medium"===o.getTaskPriority()&&n.classList.add("task-medium"),"Low"===o.getTaskPriority()&&n.classList.add("task-low");const i=document.createElement("div");i.setAttribute("class","task-actions"),n.appendChild(i);const c=document.createElement("button");c.setAttribute("class","task-delete"),c.textContent="Delete",i.appendChild(c);const d=document.createElement("input");d.setAttribute("class","task-completed"),d.setAttribute("id","task-completed"),d.setAttribute("type","checkbox"),!0===o.getTaskCompleted()&&(d.checked=!0),i.appendChild(d),e.appendChild(n)}const s=document.querySelectorAll(".task-div");1==s.length&&s.forEach((t=>{t.addEventListener("click",(t=>{console.log(1)}))}));const n=document.querySelectorAll(".task-delete");1==n.length&&n.forEach((e=>{e.addEventListener("click",(s=>{o.deleteTask(r,e.parentNode.id),i(t)}))}));const a=document.querySelectorAll(".task-completed");1==a.length&&a.forEach((e=>{e.addEventListener("click",(s=>{o.setTaskCompleted(r,e.parentNode.id,e.checked),i(t)}))}));const c=document.createElement("div");c.setAttribute("class","new-task-div"),c.textContent="+ New Task",e.appendChild(c),c.addEventListener("click",(t=>{d()}))},c=()=>{const t=document.createElement("div");t.setAttribute("class","popup"),t.setAttribute("id","new-project-popup");const e=document.createElement("div");e.setAttribute("class","popup-content"),e.setAttribute("id","new-project-popup-content"),t.appendChild(e);const s=document.createElement("h2");s.setAttribute("class","popup-header"),s.textContent="New Project",e.appendChild(s);const r=document.createElement("form");r.setAttribute("class","popup-form"),r.setAttribute("id","new-project-popup-form"),e.appendChild(r);const i=document.createElement("label");i.setAttribute("class","popup-form-label"),i.setAttribute("for","new-project-popup-form-input"),i.textContent="Project Name",r.appendChild(i);const c=document.createElement("input");c.setAttribute("class","popup-form-input"),c.setAttribute("id","new-project-popup-form-input"),c.setAttribute("type","text"),c.setAttribute("placeholder","Project Name"),r.appendChild(c);const d=document.createElement("input");d.setAttribute("class","popup-form-submit"),d.setAttribute("id","new-project-popup-form-submit"),d.setAttribute("type","submit"),d.setAttribute("value","Create Project"),r.appendChild(d),n.appendChild(t),r.addEventListener("submit",(e=>{e.preventDefault();const s=document.getElementById("new-project-popup-form-input").value;o.newProject(s),a(),t.remove()}))},d=()=>{const e=document.createElement("div");e.setAttribute("class","popup"),e.setAttribute("id","new-task-popup");const s=document.createElement("div");s.setAttribute("class","popup-content"),s.setAttribute("id","new-task-popup-content"),e.appendChild(s);const a=document.createElement("h2");a.setAttribute("class","popup-header"),a.textContent="New Task",s.appendChild(a);const c=document.createElement("form");c.setAttribute("class","popup-form"),c.setAttribute("id","new-task-popup-form"),s.appendChild(c);const d=document.createElement("label");d.setAttribute("class","popup-form-label"),d.setAttribute("for","new-task-popup-form-input"),d.textContent="Task Name",c.appendChild(d);const p=document.createElement("input");p.setAttribute("class","popup-form-input"),p.setAttribute("id","new-task-popup-form-input"),p.setAttribute("type","text"),p.setAttribute("placeholder","Task Title"),c.appendChild(p);const u=document.createElement("input");u.setAttribute("class","popup-form-input"),u.setAttribute("id","new-task-popup-form-desc"),u.setAttribute("type","text"),u.setAttribute("placeholder","Task Description"),c.appendChild(u);const l=document.createElement("input");l.setAttribute("class","popup-form-input"),l.setAttribute("id","new-task-popup-form-due-date"),l.setAttribute("type","date"),l.setAttribute("placeholder","xx/xx/xxxx"),c.appendChild(l);const m=document.createElement("select");m.setAttribute("class","popup-form-input"),m.setAttribute("id","new-task-popup-form-priority"),c.appendChild(m);const h=document.createElement("option");h.setAttribute("value","High"),h.textContent="High",m.appendChild(h);const g=document.createElement("option");g.setAttribute("value","Medium"),g.textContent="Medium",m.appendChild(g);const k=document.createElement("option");k.setAttribute("value","Low"),k.textContent="Low",m.appendChild(k);const b=document.createElement("input");b.setAttribute("class","popup-form-submit"),b.setAttribute("id","new-task-popup-form-submit"),b.setAttribute("type","submit"),b.setAttribute("value","Create Task"),c.appendChild(b),n.appendChild(e),c.addEventListener("submit",(s=>{s.preventDefault();const n=document.getElementById("new-task-popup-form-input").value,a=document.getElementById("new-task-popup-form-desc").value,c=document.getElementById("new-task-popup-form-due-date").value,d=document.getElementById("new-task-popup-form-priority").value;o.newTask(r,n,a,c,d),i(t(0,o)),e.remove()}))},p=t=>{const e=document.createElement("button");e.setAttribute("class","sproject-button"),e.setAttribute("id","today-button"),e.textContent="Today",t.appendChild(e);const s=document.createElement("button");s.setAttribute("class","sproject-button"),s.setAttribute("id","upcoming-week-button"),s.textContent="Upcoming Week",t.appendChild(s),e.addEventListener("click",(t=>{const e=(t=>{const e=t.getProjects(),s=new Date,o=[];return e.forEach((t=>{t.getTasks().forEach((t=>{t.getTaskDueDate()<=s&&o.push(t)}))})),o})(o);i(e)})),s.addEventListener("click",(t=>{const e=(t=>{const e=t.getProjects(),s=new Date,o=new Date(s.getFullYear(),s.getMonth(),s.getDate()+7),n=[];return e.forEach((t=>{t.getTasks().forEach((t=>{t.getTaskDueDate()>s&&t.getTaskDueDate()<=o&&n.push(t)}))})),n})(o);i(e)}))};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.getElementById("container");(()=>{const e=document.createElement("header");e.setAttribute("id","header");const s=document.createElement("nav");s.setAttribute("id","header-nav");const o=document.createElement("ul");o.setAttribute("id","header-nav-list"),["Home"].forEach((t=>{const e=document.createElement("li");e.setAttribute("class","header-nav-list-item"),e.textContent=t,o.appendChild(e)})),s.appendChild(o),e.appendChild(s);const n=document.createElement("h1");n.setAttribute("id","header-title"),n.textContent="Todo List",e.appendChild(n);const r=document.createElement("div");r.setAttribute("id","header-search");const a=document.createElement("input");a.setAttribute("id","header-search-input"),a.setAttribute("type","text"),a.setAttribute("placeholder","Search"),r.appendChild(a),e.appendChild(r),t.appendChild(e)})(),(()=>{const e=document.createElement("section");e.setAttribute("id","main-content"),(t=>{const e=document.createElement("aside");e.setAttribute("id","side-modal");const s=document.createElement("section");s.setAttribute("id","upper-modal-content"),e.appendChild(s);const o=document.createElement("hr");o.setAttribute("id","line-break"),e.appendChild(o);const n=document.createElement("section");n.setAttribute("id","projects-container"),e.appendChild(n),t.appendChild(e)})(e),(t=>{const e=document.createElement("section");e.setAttribute("id","task-container"),t.appendChild(e)})(e),t.appendChild(e)})(),a()})(),console.log("DOM Loaded")}))})();