(()=>{"use strict";const t=class{constructor(){this.id=0,this.title="",this.description="",this.completed=!1,this.dueDate=null,this.priority="low"}setTaskId(t){this.id=t}setTaskTitle(t){this.title=t}setTaskDescription(t){this.description=t}setTaskCompleted(t){this.completed=t}setTaskDueDate(t){this.dueDate=t}setTaskPriority(t){this.priority=t}getTaskId(){return this.id}getTaskTitle(){return this.title}getTaskDescription(){return this.description}getTaskCompleted(){return this.completed}getTaskDueDate(){return this.dueDate}getTaskPriority(){return this.priority}},e=class{constructor(){this.name="Project",this.id=0,this.tasks={},this.taskCount=0}setProjectName(t){this.name=t}setProjectId(t){this.id=t}appendTask(t){this.tasks[t.id]=t}getProjectName(){return this.name}getProjectId(){return this.id}getTasks(){return this.tasks}removeTask(t){delete this.tasks[t]}},s=new class{constructor(){this.storage={projects:{}}}deleteStorage(){localStorage.removeItem("todostorage")}getStorage(){return this.storage}setStorage(t){this.storage=t}saveStorage(){localStorage.setItem("todostorage",JSON.stringify(this.storage))}loadStorage(){null===localStorage.getItem("todostorage")&&this.saveStorage(),this.storage=JSON.parse(localStorage.getItem("todostorage"));for(let s in this.storage.projects){this.storage.projects[s]=Object.assign(new e,this.storage.projects[s]);for(let e in this.storage.projects[s].tasks)this.storage.projects[s].tasks[e]=Object.assign(new t,this.storage.projects[s].tasks[e])}}newProject(t,s){const o=new e;o.setProjectName(t),s=this.generateUniqueId(),o.setProjectId(s),this.storage.projects[s]=o,this.saveStorage()}newTask(e,s,o,n,r){const a=new t,i=this.generateUniqueId();a.setTaskId(i),a.setTaskTitle(s),a.setTaskDescription(o),a.setTaskDueDate(n),a.setTaskPriority(r),this.storage.projects[e].tasks[i]=a,this.saveStorage()}deleteProject(t){this.storage.projects[t]?(delete this.storage.projects[t],this.saveStorage()):console.log("Project not found")}deleteTask(t,e){this.storage.projects[t]&&this.storage.projects[t].tasks[e]?(delete this.storage.projects[t].tasks[e],this.saveStorage()):console.log("Project or task not found")}editProject(t,e){this.storage.projects[t].setProjectName(e),this.saveStorage()}editTask(t,e,s,o,n,r){this.storage.projects[t].tasks[e].setTaskTitle(s),this.storage.projects[t].tasks[e].setTaskDescription(o),this.storage.projects[t].tasks[e].setTaskDueDate(n),this.storage.projects[t].tasks[e].setTaskPriority(r),this.saveStorage()}getProject(t){return this.storage.projects[t]}getProjectTasks(t){return this.storage.projects[t].getTasks()}getProjects(){return void 0===this.storage.projects&&(this.storage.projects={}),this.storage.projects}getStorage(){return this.storage}setStorage(t){this.storage=t}getTasks(){const t={};for(let e in this.storage.projects)for(let s in this.storage.projects[e].tasks)t[s]=this.storage.projects[e].tasks[s];return t}addTaskToProject(t,e){this.storage.projects[t].appendTask(e)}setTaskCompleted(t,e,s){this.storage.projects[t].tasks[e].setTaskCompleted(s),this.saveStorage()}getTaskCompleted(t,e){return this.storage.projects[t].tasks[e].getTaskCompleted()}generateUniqueId(){return Date.now().toString()+Math.random().toString(36)}getTask(t,e){return this.storage.projects[t].tasks[e]}};s.loadStorage();const o=document.getElementById("container");var n=0;const r=()=>{const t=s.getProjects(),e=document.getElementById("projects-container"),o=document.getElementById("upper-modal-content");if(o.innerHTML="",e.innerHTML="",p(o),0===Object.keys(t).length){const t=document.createElement("p");t.setAttribute("class","no-projects"),t.textContent="No Projects",e.appendChild(t)}else{for(let s in t){const o=t[s],n=document.createElement("div"),r=document.createElement("img");r.setAttribute("src","./svg/lines.svg"),r.classList.add("svg-icon"),n.setAttribute("class","project-button"),n.setAttribute("id",s);const a=document.createElement("p");a.setAttribute("class","project-title"),a.textContent=o.getProjectName(),n.appendChild(r),n.appendChild(a),e.appendChild(n)}const o=document.querySelectorAll(".project-button");o.forEach((t=>{t.addEventListener("click",(()=>{const e=((t,e)=>e.getProjectTasks(t))(t.id,s);o.forEach((t=>t.classList.remove("project-button-selected"))),t.classList.add("project-button-selected"),n=t.id,a(e)}))}))}const r=document.createElement("button");r.setAttribute("class","new-project-button"),r.textContent="+ New Project",e.appendChild(r),r.addEventListener("click",(t=>{i()}))},a=t=>{const e=document.getElementById("task-container");if(e.innerHTML="",0===Object.keys(t).length){const t=document.createElement("p");t.setAttribute("class","no-tasks"),t.textContent="No Tasks",e.appendChild(t)}else for(let s in t){const o=t[s],n=document.createElement("div");n.setAttribute("class","task-div"),n.setAttribute("id",o.getTaskId());const r=document.createElement("h3");r.setAttribute("class","task-title"),r.textContent=o.getTaskTitle(),n.appendChild(r);const a=document.createElement("p");a.setAttribute("class","task-due-date"),a.textContent=o.getTaskDueDate(),n.appendChild(a),"High"===o.getTaskPriority()&&n.classList.add("task-high"),"Medium"===o.getTaskPriority()&&n.classList.add("task-medium"),"Low"===o.getTaskPriority()&&n.classList.add("task-low");const i=document.createElement("div");i.setAttribute("class","task-actions"),n.appendChild(i);const c=document.createElement("button");c.setAttribute("class","task-delete"),c.classList.add("exclude-from-div-click"),c.textContent="Delete",i.appendChild(c);const d=document.createElement("input");d.setAttribute("class","task-completed"),d.setAttribute("id","task-completed"),d.classList.add("exclude-from-div-click"),d.setAttribute("type","checkbox"),!0===o.getTaskCompleted()&&(d.checked=!0),i.appendChild(d),e.appendChild(n)}const o=document.querySelectorAll(".task-div");0!==o.length&&o.forEach((t=>{t.addEventListener("click",(e=>{if(!e.target.classList.contains("exclude-from-div-click")&&!e.target.closest(".exclude-from-click")){const e=s.getTask(n,t.id);d(e)}}))}));const r=document.querySelectorAll(".task-delete");0!==r.length&&r.forEach((e=>{e.addEventListener("click",(o=>{s.deleteTask(n,e.parentNode.parentNode.id),a(t)}))}));const i=document.querySelectorAll(".task-completed");0!==i.length&&i.forEach((e=>{e.addEventListener("click",(o=>{s.setTaskCompleted(n,e.parentNode.parentNode.id,e.checked),a(t)}))}));const p=document.createElement("div");p.setAttribute("class","new-task-div"),p.textContent="+ New Task",e.appendChild(p),p.addEventListener("click",(t=>{c()}))},i=()=>{const t=document.createElement("div");t.setAttribute("class","popup"),t.setAttribute("id","new-project-popup");const e=document.createElement("div");e.setAttribute("class","popup-content"),e.setAttribute("id","new-project-popup-content"),t.appendChild(e);const n=document.createElement("h2");n.setAttribute("class","popup-header"),n.textContent="New Project",e.appendChild(n);const a=document.createElement("form");a.setAttribute("class","popup-form"),a.setAttribute("id","new-project-popup-form"),e.appendChild(a);const i=document.createElement("label");i.setAttribute("class","popup-form-label"),i.setAttribute("for","new-project-popup-form-input"),i.textContent="Project Name",a.appendChild(i);const c=document.createElement("input");c.setAttribute("class","popup-form-input"),c.setAttribute("id","new-project-popup-form-input"),c.setAttribute("type","text"),c.setAttribute("placeholder","Project Name"),a.appendChild(c);const d=document.createElement("input");d.setAttribute("class","popup-form-submit"),d.setAttribute("id","new-project-popup-form-submit"),d.setAttribute("type","submit"),d.setAttribute("value","Create Project"),a.appendChild(d),o.appendChild(t),a.addEventListener("submit",(e=>{e.preventDefault();const o=document.getElementById("new-project-popup-form-input").value;s.newProject(o),r(),t.remove(),r()}))},c=()=>{const t=document.createElement("div");t.setAttribute("class","popup"),t.setAttribute("id","new-task-popup");const e=document.createElement("div");e.setAttribute("class","popup-content"),e.setAttribute("id","new-task-popup-content"),t.appendChild(e);const r=document.createElement("h2");r.setAttribute("class","popup-header"),r.textContent="New Task",e.appendChild(r);const i=document.createElement("form");i.setAttribute("class","popup-form"),i.setAttribute("id","new-task-popup-form"),e.appendChild(i);const c=document.createElement("label");c.setAttribute("class","popup-form-label"),c.setAttribute("for","new-task-popup-form-input"),c.textContent="Task Name",i.appendChild(c);const d=document.createElement("input");d.setAttribute("class","popup-form-input"),d.setAttribute("id","new-task-popup-form-input"),d.setAttribute("type","text"),d.setAttribute("placeholder","Task Title"),i.appendChild(d);const p=document.createElement("input");p.setAttribute("class","popup-form-input"),p.setAttribute("id","new-task-popup-form-desc"),p.setAttribute("type","text"),p.setAttribute("placeholder","Task Description"),i.appendChild(p);const u=document.createElement("input");u.setAttribute("class","popup-form-input"),u.setAttribute("id","new-task-popup-form-due-date"),u.setAttribute("type","date"),u.setAttribute("placeholder","xx/xx/xxxx"),i.appendChild(u);const l=document.createElement("select");l.setAttribute("class","popup-form-input"),l.setAttribute("id","new-task-popup-form-priority"),i.appendChild(l);const m=document.createElement("option");m.setAttribute("value","High"),m.textContent="High",l.appendChild(m);const h=document.createElement("option");h.setAttribute("value","Medium"),h.textContent="Medium",l.appendChild(h);const g=document.createElement("option");g.setAttribute("value","Low"),g.textContent="Low",l.appendChild(g);const k=document.createElement("input");k.setAttribute("class","popup-form-submit"),k.setAttribute("id","new-task-popup-form-submit"),k.setAttribute("type","submit"),k.setAttribute("value","Create Task"),i.appendChild(k),o.appendChild(t),i.addEventListener("submit",(e=>{e.preventDefault();const o=document.getElementById("new-task-popup-form-input").value,r=document.getElementById("new-task-popup-form-desc").value,i=document.getElementById("new-task-popup-form-due-date").value,c=document.getElementById("new-task-popup-form-priority").value;s.newTask(n,o,r,i,c),projectTasks=s.getTasks(n),a(projectTasks),t.remove()}))},d=t=>{},p=t=>{const e=document.createElement("button");e.setAttribute("class","sproject-button"),e.setAttribute("id","today-button"),e.textContent="Today",t.appendChild(e);const o=document.createElement("button");o.setAttribute("class","sproject-button"),o.setAttribute("id","upcoming-week-button"),o.textContent="Upcoming Week",t.appendChild(o),e.addEventListener("click",(t=>{const e=(t=>{const e=t.getProjects(),s=new Date,o=[];return e.forEach((t=>{t.getTasks().forEach((t=>{t.getTaskDueDate()<=s&&o.push(t)}))})),o})(s);a(e)})),o.addEventListener("click",(t=>{const e=(t=>{const e=t.getProjects(),s=new Date,o=new Date(s.getFullYear(),s.getMonth(),s.getDate()+7),n=[];return e.forEach((t=>{t.getTasks().forEach((t=>{t.getTaskDueDate()>s&&t.getTaskDueDate()<=o&&n.push(t)}))})),n})(s);a(e)}))};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.getElementById("container");(()=>{const e=document.createElement("header");e.setAttribute("id","header");const s=document.createElement("nav");s.setAttribute("id","header-nav");const o=document.createElement("ul");o.setAttribute("id","header-nav-list"),["Home"].forEach((t=>{const e=document.createElement("li");e.setAttribute("class","header-nav-list-item"),e.textContent=t,o.appendChild(e)})),s.appendChild(o),e.appendChild(s);const n=document.createElement("h1");n.setAttribute("id","header-title"),n.textContent="Todo List",e.appendChild(n);const r=document.createElement("div");r.setAttribute("id","header-search");const a=document.createElement("input");a.setAttribute("id","header-search-input"),a.setAttribute("type","text"),a.setAttribute("placeholder","Search"),r.appendChild(a),e.appendChild(r),t.appendChild(e)})(),(()=>{const e=document.createElement("section");e.setAttribute("id","main-content"),(t=>{const e=document.createElement("aside");e.setAttribute("id","side-modal");const s=document.createElement("section");s.setAttribute("id","upper-modal-content"),e.appendChild(s);const o=document.createElement("hr");o.setAttribute("id","line-break"),e.appendChild(o);const n=document.createElement("section");n.setAttribute("id","projects-container"),e.appendChild(n),t.appendChild(e)})(e),(t=>{const e=document.createElement("section");e.setAttribute("id","task-container"),t.appendChild(e)})(e),t.appendChild(e)})(),r()})(),console.log("DOM Loaded")}))})();